# 设计思路

## 快递的流程

- 寄快递
    - 填写寄件人和收件人信息（地址管理、自动识别地址），提交订单（并说明货物的大小）
    - 找到大小合适可以存放货物的箱子
    - 选择订单并扫二维码绑定对应的包裹箱（防止手动输入id错误，禁止手动输入。判断该包裹是否已经被他人使用）
    - 按下按钮上锁（20秒内无订单自动解锁）并提交订单，上锁后订单才能算有效（防止有人拍箱子的二维码直接扫码从而产生空包）

- 运快递
    - 每半小时进行一次温度和位置的采样并将数据上传
    - 温度过高向服务器发送报警（自带的蜂鸣器响起，这里只是示意，真实中会向指挥部或者司机发送短信提醒）
    - 手机打开app的时候从服务器获取位置数组并在地图上绘图

- 收快递
    - 快递员根据箱子的id找到收货人（服务器要将数据自动导入到快递员的帐号）
    - 收件人根据手机上的包裹id找到自己的包裹
    - 按下解锁按钮，在手机上收件
    - 锁上手动锁，回收箱子

## 硬件要求

- 无线充电
- 稳压模块
- 机械结构
    - 二维码和数字id

## 软件要求

### 单片机

- 按钮输入控制解锁和通讯
- 计时抽样上传

### Android

- 地址管理和信息填写页面
    - 说明货物大小
    - 自动识别地址
- 扫描二维码绑定箱子
- 从服务器获取位置信息并在地图中画出路线
- 快递员页面


### 服务器端

- 响应下单信息
- 响应快递箱状态（未使用、等待下单使用、已使用）
- 响应存储单片机上传的位置信息和温度信息
- 响应快递员的获取信息请求
- 响应收件

## Tips

- 手动锁加自动锁
- 增加一个解锁按钮来代替地理位置判定是否误开箱
- 在快递中转和回收箱子后对箱子进行充电